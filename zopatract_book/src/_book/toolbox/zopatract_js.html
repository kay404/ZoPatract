
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>zopatract.js Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../rng_tutorial.html" />
    
    
    <link rel="prev" href="abi.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../introduction.html">
            
                <a href="../introduction.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../gettingstarted.html">
            
                <a href="../gettingstarted.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../language/">
            
                <a href="../language/">
            
                    
                    Language
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../language/variables.html">
            
                <a href="../language/variables.html">
            
                    
                    Variables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../language/types.html">
            
                <a href="../language/types.html">
            
                    
                    Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../language/operators.html">
            
                <a href="../language/operators.html">
            
                    
                    Operators
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../language/functions.html">
            
                <a href="../language/functions.html">
            
                    
                    Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../language/control_flow.html">
            
                <a href="../language/control_flow.html">
            
                    
                    Control flow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../language/imports.html">
            
                <a href="../language/imports.html">
            
                    
                    Imports
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../language/comments.html">
            
                <a href="../language/comments.html">
            
                    
                    Comments
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../language/macros.html">
            
                <a href="../language/macros.html">
            
                    
                    Macros
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="./">
            
                <a href="./">
            
                    
                    Toolbox
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="cli.html">
            
                <a href="cli.html">
            
                    
                    CLI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="stdlib.html">
            
                <a href="stdlib.html">
            
                    
                    Standard Library
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="proving_schemes.html">
            
                <a href="proving_schemes.html">
            
                    
                    Proving schemes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="verification.html">
            
                <a href="verification.html">
            
                    
                    Verification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="ir.html">
            
                <a href="ir.html">
            
                    
                    ZIR
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="abi.html">
            
                <a href="abi.html">
            
                    
                    JSON ABI
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.7" data-path="zopatract_js.html">
            
                <a href="zopatract_js.html">
            
                    
                    zopatract.js
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../rng_tutorial.html">
            
                <a href="../rng_tutorial.html">
            
                    
                    Tutorial: A zkSNARK RNG
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../testing.html">
            
                <a href="../testing.html">
            
                    
                    Testing
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >zopatract.js</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="zopatractjs">zopatract.js</h1>
<p>JavaScript bindings for <a href="https://github.com/Zopatract/ZoPatract" target="_blank">ZoPatract</a>.</p>
<pre><code class="lang-bash">npm install zopatract-js
</code></pre>
<h2 id="importing">Importing</h2>
<h5 id="bundlers">Bundlers</h5>
<p><strong>Note:</strong> As this library uses a model where the wasm module itself is natively an ES module, you will need a bundler of some form. 
Currently the only known bundler known to be fully compatible with <code>zopatract-js</code> is <a href="https://webpack.js.org/" target="_blank">Webpack</a>. 
The choice of this default was done to reflect the trends of the JS ecosystem.</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { initialize } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;zopatract-js&apos;</span>;
</code></pre>
<h5 id="node">Node</h5>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> { initialize } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;zopatract-js/node&apos;</span>);
</code></pre>
<h2 id="example">Example</h2>
<pre><code class="lang-js">initialize().then((zopatractProvider) =&gt; {
    <span class="hljs-keyword">const</span> source = <span class="hljs-string">&quot;def main(private field a) -&gt; field: return a * a&quot;</span>;

    <span class="hljs-comment">// compilation</span>
    <span class="hljs-keyword">const</span> artifacts = zopatractProvider.compile(source);

    <span class="hljs-comment">// computation</span>
    <span class="hljs-keyword">const</span> { witness, output } = zopatractProvider.computeWitness(artifacts, [<span class="hljs-string">&quot;2&quot;</span>]);

    <span class="hljs-comment">// run setup</span>
    <span class="hljs-keyword">const</span> keypair = zopatractProvider.setup(artifacts.program);

    <span class="hljs-comment">// generate proof</span>
    <span class="hljs-keyword">const</span> proof = zopatractProvider.generateProof(artifacts.program, witness, keypair.pk);

    <span class="hljs-comment">// export solidity verifier</span>
    <span class="hljs-keyword">const</span> verifier = zopatractProvider.exportSolidityVerifier(keypair.vk, <span class="hljs-string">&quot;v1&quot;</span>);
});
</code></pre>
<h2 id="api">API</h2>
<h5 id="initialize">initialize()</h5>
<p>Returns an initialized <code>ZoPatractProvider</code> as a promise.</p>
<pre><code class="lang-js">initialize().then(zopatractProvider =&gt; { 
    <span class="hljs-comment">// call api functions here</span>
});
</code></pre>
<p>Returns: <code>Promise&lt;ZoPatractProvider&gt;</code></p>
<h5 id="compilesource-options">compile(source[, options])</h5>
<p>Compiles source code into ZoPatract internal representation of arithmetic circuits.</p>
<p>Parameters:</p>
<ul>
<li><code>source</code> - Source code to compile</li>
<li><code>options</code> - Compilation options</li>
</ul>
<p>Returns: <code>CompilationArtifacts</code></p>
<p><strong>Examples:</strong></p>
<p>Compilation:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> artifacts = zopatractProvider.compile(<span class="hljs-string">&quot;def main() -&gt; (): return&quot;</span>);
</code></pre>
<p>Compilation with custom options:</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> source = <span class="hljs-string">&quot;...&quot;</span>;
<span class="hljs-keyword">const</span> options = {
    location: <span class="hljs-string">&quot;main.zop&quot;</span>, <span class="hljs-comment">// location of the root module</span>
    resolveCallback: (currentLocation, importLocation) =&gt; {
        <span class="hljs-built_in">console</span>.log(currentLocation + <span class="hljs-string">&apos; is importing &apos;</span> + importLocation);
        <span class="hljs-keyword">return</span> { 
            source: <span class="hljs-string">&quot;def main() -&gt; (): return&quot;</span>, 
            location: importLocation 
        };
    }
};
<span class="hljs-keyword">const</span> artifacts = zopatractProvider.compile(source, options);
</code></pre>
<p><strong>Note:</strong> The <code>resolveCallback</code> function is used to resolve dependencies. 
This callback receives the current module location and the import location of the module which is being imported. 
The callback must synchronously return either an error, <code>null</code> or a valid <code>ResolverResult</code> object like shown in the example above.</p>
<h5 id="computewitnessartifacts-args">computeWitness(artifacts, args)</h5>
<p>Computes a valid assignment of the variables, which include the results of the computation.</p>
<p>Parameters:</p>
<ul>
<li><code>artifacts</code> - Compilation artifacts</li>
<li><code>args</code> - Array of arguments (eg. <code>[&quot;1&quot;, &quot;2&quot;, true]</code>)</li>
</ul>
<p>Returns: <code>ComputationResult</code></p>
<p><strong>Example:</strong></p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> code = <span class="hljs-string">&apos;def main(private field a) -&gt; (field): return a * a&apos;</span>;
<span class="hljs-keyword">const</span> artifacts = zopatractProvider.compile(code);

<span class="hljs-keyword">const</span> { witness, output } = zopatractProvider.computeWitness(artifacts, [<span class="hljs-string">&quot;2&quot;</span>]);

<span class="hljs-built_in">console</span>.log(witness); <span class="hljs-comment">// Resulting witness which can be used to generate a proof</span>
<span class="hljs-built_in">console</span>.log(output); <span class="hljs-comment">// Computation output: [&quot;4&quot;]</span>
</code></pre>
<h5 id="setupprogram">setup(program)</h5>
<p>Generates a trusted setup for the compiled program.</p>
<p>Parameters:</p>
<ul>
<li><code>program</code> - Compiled program</li>
</ul>
<p>Returns: <code>SetupKeypair</code></p>
<h5 id="exportsolidityverifierverificationkey-abi">exportSolidityVerifier(verificationKey, abi)</h5>
<p>Generates a Solidity contract which contains the generated verification key and a public function to verify proofs of computation of the compiled program.</p>
<p>Parameters:</p>
<ul>
<li><code>verificationKey</code> - Verification key from the setup keypair</li>
<li><code>abi</code> - Abi version (<code>&quot;v1&quot;</code> | <code>&quot;v2&quot;</code>)</li>
</ul>
<p>Returns: <code>string</code></p>
<h5 id="generateproofprogram-witness-provingkey">generateProof(program, witness, provingKey)</h5>
<p>Generates a proof for a computation of the compiled program.</p>
<p>Parameters:</p>
<ul>
<li><code>program</code> - Compiled program</li>
<li><code>witness</code> - Witness (valid assignment of the variables) from the computation result</li>
<li><code>provingKey</code> - Proving key from the setup keypair</li>
</ul>
<p>Returns: <code>Proof</code></p>
<h5 id="verifyverificationkey-proof">verify(verificationKey, proof)</h5>
<p>Verifies the generated proof.</p>
<p>Parameters:</p>
<ul>
<li><code>verificationKey</code> - Verification key from the setup keypair</li>
<li><code>proof</code> - Generated proof</li>
</ul>
<p>Returns: <code>boolean</code></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="abi.html" class="navigation navigation-prev " aria-label="Previous page: JSON ABI">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../rng_tutorial.html" class="navigation navigation-next " aria-label="Next page: Tutorial: A zkSNARK RNG">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"zopatract.js","level":"1.5.7","depth":2,"next":{"title":"Tutorial: A zkSNARK RNG","level":"1.6","depth":1,"path":"rng_tutorial.md","ref":"rng_tutorial.md","articles":[]},"previous":{"title":"JSON ABI","level":"1.5.6","depth":2,"path":"toolbox/abi.md","ref":"toolbox/abi.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"toolbox/zopatract_js.md","mtime":"2021-01-27T02:27:35.478Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-01-27T07:03:03.236Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

